- name: Include the connection vars
  include_vars:
    file: "../../prepare_snmp_tests/vars/{{ connection }}.yaml"

- name: Retrieve several individual OIDs
  ansible.snmp.walk:
    oids:
      - oid: IF-MIB::ifIndex
      - oid: IF-MIB::ifDescr
    numeric: False
    long_names: True
  register: output

- name: Ensure the output is valid
  assert:
    that:
      - "'lo' in output.result.0.ifDescr"
